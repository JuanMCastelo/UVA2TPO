document.addEventListener('DOMContentLoaded',()=>{const btnLight=document.getElementById('btn-light');const btnDark=document.getElementById('btn-dark');const savedTheme=localStorage.getItem('theme');if(savedTheme){document.documentElement.setAttribute('data-theme',savedTheme);}if(btnLight){btnLight.addEventListener('click',()=>{document.documentElement.setAttribute('data-theme','light');localStorage.setItem('theme','light');});}if(btnDark){btnDark.addEventListener('click',()=>{document.documentElement.setAttribute('data-theme','dark');localStorage.setItem('theme','dark');});}const form=document.getElementById('contactForm');if(form){const msgContainer=document.getElementById('formMessage');function validateEmail(email){const re=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return re.test(email);}function escapeHTML(str){return str.replace(/[&<>"']/g,c=>({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'})[c]);}form.addEventListener('submit',(event)=>{event.preventDefault();msgContainer.innerHTML='';const nombre=form.nombre.value.trim();const email=form.email.value.trim();const mensaje=form.mensaje.value.trim();const errors=[];if(!nombre){errors.push('• Por favor,ingresa tu nombre.');}if(!email){errors.push('• Por favor,ingresa tu correo electrónico.');}else if(!validateEmail(email)){errors.push('• Por favor,ingresa un correo válido.');}if(!mensaje){errors.push('• Por favor,escribe un mensaje.');}if(errors.length>0){const list=errors.map(err=>`<li>${err}</li>`).join('');msgContainer.innerHTML=`<div class="alert alert-danger" role="alert"><ul class="mb-0">${list}</ul></div>`;}else{msgContainer.innerHTML=`<div class="alert alert-success" role="alert">Gracias por su contacto,<strong>${escapeHTML(nombre)}</strong>.<br>En breve le estaré respondiendo.</div>`;form.reset();}});}});
